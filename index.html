<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sudoku｜検算・色切替・ヒント（1手適用）＋Undo/Redo</title>
  <link rel="stylesheet" href="./styles.css" />
  <meta name="color-scheme" content="light dark" />
</head>
<body>
  <header>
    <h1>Sudoku（ヒント1手適用・Undo/Redo対応） <span class="version">ver1.26</span></h1>
    <p class="hint">黒=問題, 青=手入力(切替), 赤=ソルバ。<strong>埋める</strong>は確定手を入力、<strong>ヒントを表示</strong>で削除ヒント→<strong>候補を減らす</strong>で適用。</p>
  </header>

  <main>
    <div class="wrap">
      <div class="gridwrap">
        <div id="colLabels" class="col-labels" aria-hidden="true"></div>
        <div id="rowLabels" class="row-labels" aria-hidden="true"></div>
        <div id="board" class="board" aria-label="数独盤面"></div>
        <div id="rowSums" class="row-sums" aria-label="行の総和"></div>
        <aside id="blockPane" class="right-panel" aria-label="検算パネル">
          <div id="blockSums" class="block-sums" aria-label="3x3ブロックの総和"></div>
        </aside>
        <div id="colSums" class="col-sums" aria-label="列の総和"></div>
      </div>

      <section class="controls" aria-label="操作パネル">
        <div class="row">
          <button id="solve" class="primary">解く</button>
          <button id="doHint">埋める（1手）</button>
          <button id="reduceCandidates">ヒントを表示</button>
          <button id="toggleCandidates">候補:OFF</button>
          <button id="undo" disabled>戻す</button>
          <button id="redo" disabled>進む</button>
          <button id="check">矛盾チェック</button>
          <button id="clear">全消去</button>
          <button id="demo">例題</button>
          <label class="selectwrap">手入力の色:
            <select id="manualColor">
              <option value="blue" selected>青</option>
              <option value="black">黒</option>
            </select>
          </label>
        </div>
        <div class="row io">
          <input id="linear" type="text" placeholder="81文字（0=空欄）" />
          <button id="load">読み込む（固定）</button>
          <button id="export">書き出す</button>
        </div>
        <div id="msg" class="msg" aria-live="polite"></div>
      </section>
    </div>
  </main>

  <footer class="note">
    <p>完成時は各行・列・ブロックの合計が<strong>45</strong>（OK緑／未完成橙／矛盾赤）。</p>
    <details class="history">
      <summary>更新履歴</summary>
      <ul>
        <li><strong>1.26</strong> Undo/Redo の色復元とヒント系ボタンの完了時無効化</li>
        <li><strong>1.25</strong> Hidden Single の対象ユニット（行/列/ブロック）を緑で強調</li>
        <li><strong>1.24</strong> 解説の行列・座標表記を Excel 形式に修正（c1 表記の解消）</li>
        <li><strong>1.23</strong> 削除ヒントが出ない場合は「ヒントを表示」を無効化</li>
        <li><strong>1.22</strong> 座標表記を Excel 形式（列A..I／行1..9、例: A5）に統一</li>
        <li><strong>1.21</strong> 解説内の座標表記を「列番号＋行記号」（例: 5A）に統一</li>
        <li><strong>1.20</strong> 候補削除を「ヒント表示→候補削除」に改名／削除不可時は確定候補をハイライト</li>
        <li><strong>1.19</strong> 候補削除を「削除ヒント表示→適用」の2段階に変更</li>
        <li><strong>1.18</strong> 盤面の上/左に座標ラベルを表示</li>
        <li><strong>1.17</strong> 候補削除のたびに「次の削除ヒント」を表示／座標表示を確実に可視化</li>
        <li><strong>1.16</strong> マス座標（将棋盤式の英数字）を盤面に表示</li>
        <li><strong>1.15</strong> 「埋める」と「候補を減らす」を分離（候補削除は1回=1候補）</li>
        <li><strong>1.14</strong> 候補削除後に自動で次の一手へ進行</li>
        <li><strong>1.13</strong> Skyscraper／Two-String Kite／XYZ-Wing 追加（候補消去の手筋を強化）</li>
        <li><strong>1.12</strong> 候補表示のON/OFFボタン追加（ヒント連動を廃止）</li>
        <li><strong>1.11</strong> 候補消去ヒントを追加／Jellyfish 追加／Locked Candidates の説明強化／確定手を優先表示</li>
        <li><strong>1.10</strong> ヒント候補の表示（ヒント時のみ）</li>
      </ul>
    </details>
  </footer>

  <!-- 依存順に読み込み（defer は順序を保持して DOM 後に実行） -->
  <script defer src="./core/solver.js"></script>
  <script defer src="./core/grid.js"></script>
  <script defer src="./core/sums.js"></script>

  <script defer src="./hints/candidates.js"></script>
  <script defer src="./hints/naked.js"></script>
  <script defer src="./hints/hidden.js"></script>
  <script defer src="./hints/pairs.js"></script>
  <script defer src="./hints/triples.js"></script>
  <script defer src="./hints/xwing.js"></script>
  <script defer src="./hints/skyscraper.js"></script>
  <script defer src="./hints/kite.js"></script>
  <script defer src="./hints/locked.js"></script>
  <script defer src="./hints/xyzwing.js"></script>
  <script defer src="./hints/ywing.js"></script>
  <script defer src="./ui/reasons.js?v=1.24"></script>
  <script defer src="./hints/quads.js"></script>
  <script defer src="./hints/swordfish.js"></script>
  <script defer src="./hints/jellyfish.js"></script>

  <script defer src="./app.js?v=1.26"></script>
</body>
</html>
